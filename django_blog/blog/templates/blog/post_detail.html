{% extends "blog/base.html" %}
{% block title %}{{ post.title }} - Django Blog{% endblock %}

{% block content %}
  <article class="post-detail">
    <header>
      <h1>{{ post.title }}</h1>
      <p>
        <small>
          by <strong>{{ post.author.username }}</strong> · 
          {{ post.published_date|date:"M d, Y H:i" }}
        </small>
      </p>
    </header>

    <section class="post-content">
      <p>{{ post.content|linebreaks }}</p>
    </section>

    <!-- ✅ Added Tags Section -->
    <p>
      Tags:
      {% for tag in post.tags.all %}
        <a href="{% url 'posts_by_tag' tag.name %}">{{ tag.name }}</a>{% if not forloop.last %}, {% endif %}
      {% empty %}
        No tags
      {% endfor %}
    </p>
  </article>

  <hr>

  <p><a href="{% url 'posts' %}">&larr; Back to all posts</a></p>

  {% if user.is_authenticated and user == post.author %}
    <div class="post-actions">
      <a href="{% url 'post_update' post.pk %}" class="btn btn-sm btn-primary">✏️ Edit</a>
      <a href="{% url 'post_delete' post.pk %}" class="btn btn-sm btn-danger">🗑️ Delete</a>
    </div>
  {% endif %}
{% endblock %}
